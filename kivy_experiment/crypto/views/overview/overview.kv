#: import Window kivy.core.window.Window

<Overview>:
    orientation: 'vertical'
    spacing: dp(12)
    BoxLayout:
        size_hint_y: .3
        padding: [dp(12), dp(4)]
        orientation: 'vertical'
        Text:
            text: 'Assets Value'
            color: app.colors.secondary
            font_size: app.fonts.size.h4
            halign: "center"
            valign: 'bottom'
        Text:
            text: '$ 54,269.91'
            color: app.colors.white
            font_size: app.fonts.size.extra
            font_name: app.fonts.heading
            halign: "center"
        Text:
            text: 'approx 1.4BTC'
            color: app.colors.white
            font_size: app.fonts.size.h5
            halign: "center"
            size_hint_y: None
            height: dp(18)
        Text:
            text: '+2.4%'
            color: app.colors.success
            font_size: app.fonts.size.h5
            halign: "center"
            size_hint_y: None
            height: dp(18)
        AnchorLayout:
            RoundedButton:
                text: "refresh"
                font_size: app.fonts.size.h5
                size_hint: [.25, None]
                height: dp(28)
                bcolor: app.colors.white
                color: app.colors.bg
                font_name: app.fonts.subheading
                radius: [self.height/2]
    BoxLayout:
        size_hint_y: .35
        padding: [dp(12), dp(4)]
        spacing: dp(8)
        orientation: 'vertical'
        Text:
            text: "My Assets"
            color: app.colors.white
            font_name: app.fonts.body
            font_size: app.fonts.size.h4
            size_hint_y: None
            height: dp(18)
        BoxLayout:
            ScrollView:
                do_scroll: [True, False]
                size_hint: [None, None]
                bar_inactive_color: [0,0,0,0]
                bar_active_color: [0,0,0,0]
                size: self.parent.size
                GridLayout:
                    id: gl_my_assets
                    rows: 1
                    size_hint: [None, None]
                    size: self.minimum_size
                    spacing: sp(12)
    BoxLayout:
        size_hint_y: .35
        padding: [dp(12), dp(4)]
        spacing: dp(8)
        orientation: 'vertical'
        Text:
            text: "My Watchlist"
            color: app.colors.white
            font_name: app.fonts.body
            font_size: app.fonts.size.h4
            size_hint_y: None
            height: dp(18)
        BoxLayout:
            ScrollView:
                do_scroll: [False, True]
                size_hint_y: None
                height: self.parent.height
                bar_active_color: [0,0,0,0]
                bar_inactive_color: [0,0,0,0]
                GridLayout:
                    id: gl_watchlist
                    cols: 1
                    spacing: dp(4)
                    size_hint_y: None
                    height: self.minimum_height

<Asset>:
    size_hint: [None, None]
    width: Window.size[0]*.38
    height: dp(240)
    orientation: 'vertical'
    spacing: dp(8)
    padding: dp(4)
    canvas.before:
        Color:
            rgba: app.colors.secondary
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(12)]
    BoxLayout:
        size_hint_y: None
        height: dp(42)
        
        AnchorLayout:
            size_hint_x: None
            width: dp(42)
            BoxLayout:
                size_hint: [None, None]
                size: [dp(42), dp(42)]
                padding: dp(4)
                RelativeLayout:
                    AsyncImage:
                        id: proxy
                        source: "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579"
                        opacity: 0
                    Widget:
                        canvas.before:
                            Color:
                                rgba: [1,1,1,1]
                            Ellipse:
                                size: self.size[0], self.size[1]
                                pos: self.pos
                                texture: proxy.texture
                    
        BoxLayout:
            size_hint_x: .5
            Text:
                text: root.text
                font_name: app.fonts.heading
                color: app.colors.white
        BoxLayout:
            size_hint_x: .5
            Text:
                size_hint_x: None
                width: dp(48)
                text: "+%s"%str(root.price_change)
                halign: 'left'
                font_name: app.fonts.subheading
                font_size: sp(10)
                color: app.colors.success
    BoxLayout:
        Graph:
            id: graph
            xmax: len(root.chart_data)
            xmin: 0
            ymin: 0.1
            ymax: 7
            draw_border: False
    BoxLayout:
        size_hint_y: None
        height: dp(42)
        orientation: 'vertical'
        Text:
            text: "$%s"%str(root.price)
            font_name: app.fonts.heading
            color: app.colors.white
        Text:
            text: "%s owned"%str(root.owned)
            font_name: app.fonts.body
            color: app.colors.tertiary_light

<ListTile>:
    size_hint_y: None
    height: dp(54)
    padding: dp(8)
    canvas.before:
        Color:
            rgba: app.colors.secondary
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(8)]
    BoxLayout:
        size_hint_x: None
        width: self.height
        padding: dp(4)
        RelativeLayout:
            AsyncImage:
                id: proxy
                source: "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579"
                opacity: 0
            Widget:
                canvas.before:
                    Color:
                        rgba: [1,1,1,1]
                    Ellipse:
                        size: self.size[0], self.size[1]
                        pos: self.pos
                        texture: proxy.texture
                
    BoxLayout:
        size_hint_x: .45
        Text:
            text: root.text
            font_name: app.fonts.subheading
            color: app.colors.white
    BoxLayout:
        size_hint_x: .55
        Text:
            text: "$%s"%str(root.price)
            font_name: app.fonts.subheading
            halign: 'right'
            color: app.colors.white
            font_size: app.fonts.size.h5
        Text:
            size_hint_x: None
            width: dp(48)
            text: "+%s"%str(root.price_change)
            halign: 'right'
            font_name: app.fonts.subheading
            font_size: app.fonts.size.h6
            color: app.colors.success
        
    